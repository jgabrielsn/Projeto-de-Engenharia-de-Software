<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <link
      href="https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css"
      rel="stylesheet"
    
    />
    <style>
      /* Google Fonts - Poppins */
@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap");

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Poppins", sans-serif;
}
body {
  min-height: 100%;
  background: #ffffff;
}
nav {
  position: fixed;
  top: 0;
  left: 0;
  height: 70px;
  width: 100%;
  display: flex;
  align-items: center;
  background: #5FD38F;
  box-shadow: 0 0 1px rgba(0, 0, 0, 0.1);
}
nav .logo {
  display: flex;
  align-items: center;
  margin: 0 24px;
}
.logo .menu-icon {
  color: #060000;
  font-size: 24px;
  margin-right: 14px;
  cursor: pointer;
}
.logo .logo-name {
  color: #030000;
  font-size: 22px;
  font-weight: 500;
}
nav .sidebar {
  position: fixed;
  top: 0;
  left: -100%;
  height: 100%;
  width: 260px;
  padding: 20px 0;
  background-color: #5FD38F;
  box-shadow: 0 5px 1px rgba(0, 0, 0, 0.1);
  transition: all 0.4s ease;
}
nav.open .sidebar {
  left: 0;
}
.sidebar .sidebar-content {
  display: flex;
  height: 100%;
  flex-direction: column;
  justify-content: space-between;
  padding: 30px 16px;
}
.sidebar-content .list {
  list-style: none;
}
.list .nav-link {
  display: flex;
  align-items: center;
  margin: 8px 0;
  padding: 14px 12px;
  border-radius: 8px;
  text-decoration: none;
}
.lists .nav-link:hover {
  background-color: hsl(145, 97%, 13%);
}
.nav-link .icon {
  margin-right: 14px;
  font-size: 20px;
  color: #020202;
}
.nav-link .link {
  font-size: 16px;
  color: #050505;
  font-weight: 400;
}
.lists .nav-link:hover .icon,
.lists .nav-link:hover .link {
  color: #fff;
}
.overlay {
  position: fixed;
  top: 0;
  left: -100%;
  height: 1000vh;
  width: 200%;
  opacity: 0;
  pointer-events: none;
  transition: all 0.4s ease;
}
nav.open ~ .overlay {
  opacity: 1;
  left: 260px;
  pointer-events: auto;
}

.saldo{
  font-size: 18px;
    width: 250px;
    height: 100px;
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color:#5FD38F ;
    position: absolute;
    top: 15%;
    left: 19.7%;
    padding: 30px;
    border-radius: 15px;
    color: #030303;
}

.adicionar-saldo{
    text-decoration: none;
    text-align: center;
    width: 100px;
    height: 100px;
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color:#5FD38F ;
    position: absolute;
    top: 15%;
    left: 34%;
    padding: 30px;
    border-radius: 15px;
    color: #030303;
}

    </style>
  </head>
  <body>
    
    <nav>
      <div class="logo">
        <i class="bx bx-menu menu-icon"></i>
        <span class="logo-name">Budget</span>
      </div>
      <div class="sidebar">
        <div class="logo">
          <i class="bx bx-menu menu-icon"></i>
          <span class="logo-name">Budget</span>
        </div>

        <div class="sidebar-content">
          <ul class="lists">
            <li class="list">
              <a href="home.html" class="nav-link">
                <i class="bx bx-home-alt icon"></i>
                <span class="link">Dashboard</span>
              </a>
            </li>
            <li class="list">
              <a href="addgasto.html" class="nav-link">
                <i class="bx bx-bar-chart-alt-2 icon"></i>
                <span class="link">Gerenciar Gastos</span>
              </a>
            </li>
            <li class="list">
              <a href="minhas-contas.html" class="nav-link">
                <i class="bx bx-bar-chart-alt-2 icon"></i>
                <span class="link">Gerenciar contas</span>
              </a>
            </li>
            <li class="list">
              <a href="dicas-financeiras.html" class="nav-link">
                <i class="bx bx-message-rounded icon"></i>
                <span class="link">Dicas financeiras</span>
              </a>
            </li>
            <!--<li class="list">
              <a href="#" class="nav-link">
                <i class="bx bx-pie-chart-alt-2 icon"></i>
                <span class="link">Análises</span>
              </a>
            </li>-->
          </ul>

          <div class="bottom-cotent">
            <li class="list">
              <a href="#" class="nav-link">
                <i class="bx bx-cog icon"></i>
                <span class="link"> Perfil</span>
              </a>
            </li>
            <li class="list">
              <a href="welcome.html" class="nav-link" id="logout-link">
                <i class="bx bx-log-out icon"></i>
                <span class="link">Sair</span>
              </a>
              
              <script>
                document.getElementById('logout-link').addEventListener('click', function() {
                  localStorage.removeItem('usuario');
                });
              </script>
            </li>
          </div>
        </div>
      </div>
    </nav>

    <section class="overlay"></section>

    <script>
      const navBar = document.querySelector("nav"),
        menuBtns = document.querySelectorAll(".menu-icon"),
        overlay = document.querySelector(".overlay");

      menuBtns.forEach((menuBtn) => {
        menuBtn.addEventListener("click", () => {
          navBar.classList.toggle("open");
        });
      });

      overlay.addEventListener("click", () => {
        navBar.classList.remove("open");
      });
    </script>
    
    <div id="curve_chart" style="width: 800px; height: 500px; transform: translate(33%,50%);"></div>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="get/get-gastosGL.js">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        /* let usuario = JSON.parse(localStorage.getItem("usuario"));
            let id = usuario.user.UserID;
            let values = fazGet("http://localhost:3000/users/contas/"+id);
            let listValues = JSON.parse(values)
            let list = document.getElementById('to-do-list')

            list.innerHTML = ''
            for(let i = 0; i < listValues.length; i++)
            {
              const date = new Date(listValues[i]["vencimento"]);
              const dataFormatada = date.toLocaleDateString(); // ou data.toLocaleString()

                list.innerHTML += `<li>
                <div id="desc-lista">${listValues[i]["contaNome"]}</div>
                <div id="valor-lista">R$ ${listValues[i]["valor"]}</div>
                <div id="venc-lista">${dataFormatada}</div>
                <button id='btn-ok' onclick='removeItem("${listValues[i]["Codigo"]}", "${listValues[i]["valor"]}" )'><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16"><path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/></svg></button></li>`
        
        
        router.get('/gastos', gastoController.getAll);

                */
        
        var dados = showGastos()        
        var data = google.visualization.arrayToDataTable([
        ['Nome', 'valor'],
        ...dados.map(gasto => [gasto.gastoNome, gasto.valor])
        ]);        
        
        
        for (var i = 0; i < dados.length; i++) {
        data.addRow([dados[i].gastoNome, dados[i].valor]);
        }

        var options = {
          title: 'Gastos',
          curveType: 'function',
          legend: { position: 'bottom' }
        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);
      }
    </script>

      <div id="piechart" style="width: 500px; height: 500px; transform: translate(230%,-50%);"></div>
     <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
     <script type="text/javascript" src="get/get-gastosGP.js">
      google.charts.load('current', {'packages':['corechart']});
       google.charts.setOnLoadCallback(drawChart);
 
       function drawChart() {
 
         var data = google.visualization.arrayToDataTable([
           ['Tipo', 'valor'],
           ['Transporte',     500],
           ['Alimentação',      1500],
           ['Lazer',  500],
           ['Contas', 2000]
         ]);
 
         var options = {
           title: 'Divisão dos gastos'
         };
 
         var chart = new google.visualization.PieChart(document.getElementById('piechart'));
 
         chart.draw(data, options);
       }
     </script>
      
      
      <a class="adicionar-saldo" href="add-saldo.html"><h1> +</h1> </a>

      <div class="saldo">
        <script src="get/get-saldo.js"></script>
        saldo em reais:
        <span id="saldo"></span>
        <script>
          document.getElementById("saldo").textContent = showSaldo();
        </script>
      </div>
      
      

  </body>
</html>
